<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Ad Counter ‚Äì 20% Size</title>
  <style>
    html,body{margin:0;padding:0;height:100%;overflow:hidden;font-family:Arial,Helvetica,sans-serif;font-size:4px} /* 20px/5 */

    /* ---------- Splash Screen ---------- */
    #splash{position:fixed;inset:0;background:url("img4.png") center/cover no-repeat;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:10;transition:opacity .6s ease}
    #splash .circle{width:80px;height:80px;border-radius:50%;overflow:hidden;box-shadow:0 0 0 2px #FFD700}
    #splash .circle img{width:100%;height:100%;object-fit:cover;display:block}
    #splash .progress-wrapper{width:80px;height:4px;background:#222;border-radius:2px;overflow:hidden;margin-top:8px}
    #splash .progress-bar{height:100%;width:0%;background:linear-gradient(90deg,#ff8c00,#ffd700,#ff8c00);border-radius:2px;animation:loading 3s linear forwards}
    @keyframes loading{0%{width:0%}100%{width:100%}}

    /* ---------- Main Screen ---------- */
    #main{position:fixed;inset:0;background:url("img.png") center/cover no-repeat;opacity:0;transition:opacity .6s ease;display:flex;flex-direction:column;align-items:center;justify-content:flex-end;padding-bottom:6px}

    /* ---------- Large Center Circle ---------- */
    #centerCircle{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:88px;height:88px;border-radius:50%;overflow:visible;background:#777;box-shadow:0 0 6px rgba(0,0,0,.6)}
    #centerCircle img{width:100%;height:100%;object-fit:cover;border-radius:50%}
    #centerCircle.ripple::after{content:'';position:absolute;top:50%;left:50%;width:0;height:0;background:radial-gradient(circle, rgba(255,0,0,.9) 0%, rgba(180,0,0,.85) 22%, rgba(0,0,0,.8) 44%, rgba(255,0,0,.7) 66%, rgba(0,0,0,.6) 88%, transparent 100%);border-radius:50%;transform:translate(-50%,-50%);animation:denseRipple 1.3s ease-out infinite}
    @keyframes denseRipple{0%{width:0;height:0;opacity:1}100%{width:220px;height:220px;opacity:0}}

    /* ---------- 2D Glass Buttons Row ---------- */
    #buttonsRow{display:flex;gap:6px;margin-bottom:4px}
    .glass-btn{
      width:40px;height:18px;
      background:rgba(255,255,255,.08);backdrop-filter:blur(2px);
      border:1px solid rgba(255,215,0,.4);border-radius:3px;
      color:#fff;font-size:4px;font-weight:bold;cursor:pointer;
      transition:all .3s ease;box-shadow:0 1px 4px rgba(0,0,0,.3)
    }
    .glass-btn:hover{background:rgba(255,215,0,.2);border-color:#FFD700;color:#000}

    /* ---------- Balance Boxes ---------- */
    #balanceBoxes{position:fixed;top:4px;left:4px;display:flex;gap:3px;z-index:5}
    .balanceBox{
      background:rgba(0,0,0,.4);backdrop-filter:blur(2px);
      border:1px solid rgba(255,215,0,.4);border-radius:4px;
      padding:3px 5px;color:#fff;font-size:6px;font-weight:bold;
      display:flex;align-items:center;gap:2px
    }

    /* ---------- 3-Hour Countdown ---------- */
    #countdownBox{position:fixed;top:4px;right:4px;background:rgba(0,0,0,.4);backdrop-filter:blur(2px);border:1px solid rgba(255,215,0,.4);border-radius:4px;padding:3px 5px;color:#ffd700;font-size:4px;font-weight:bold;z-index:5}

    /* ---------- Auto-Click Indicator ---------- */
    #autoIndicator{position:fixed;top:16px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,.4);backdrop-filter:blur(2px);border:1px solid rgba(255,215,0,.4);border-radius:4px;padding:2px 4px;color:#ffd700;font-size:4px;font-weight:bold;display:none;z-index:5}

    /* ---------- Glass Tutorial ---------- */
    #tutorial{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:90%;max-width:160px;background:rgba(255,255,255,.1);backdrop-filter:blur(2px);border:1px solid rgba(255,255,255,.2);border-radius:4px;padding:10px;color:#fff;text-align:center;display:none;flex-direction:column;align-items:center;gap:5px;z-index:20}
    #tutorial .arrow{font-size:16px;animation:bounce 1s infinite}
    @keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-2px)}}
    #tutorial div{font-size:6px}
    #tutorial button{background:#FFD700;color:#000;border:none;padding:4px 10px;border-radius:3px;font-weight:bold;font-size:6px;cursor:pointer}

    /* ---------- Swap Modal ---------- */
    #swapModal{position:fixed;inset:0;background:rgba(0,0,0,.6);backdrop-filter:blur(2px);display:none;align-items:center;justify-content:center;z-index:30}
    .swapContent{background:rgba(0,0,0,.6);border:1px solid rgba(255,215,0,.4);border-radius:4px;padding:8px;width:90%;max-width:90px;display:flex;flex-direction:column;gap:4px;color:#fff;font-size:5px}
    .swapContent input{padding:3px;font-size:5px;border-radius:2px;border:none;text-align:center}
    .swapContent button{padding:3px;font-size:5px;border-radius:2px;border:none;background:#FFD700;color:#000;font-weight:bold;cursor:pointer}
    .closeBtn{align-self:flex-end;font-size:6px;cursor:pointer}

    /* ---------- Withdraw Modal ---------- */
    #withdrawModal{position:fixed;inset:0;background:rgba(0,0,0,.6);backdrop-filter:blur(2px);display:none;align-items:center;justify-content:center;z-index:30}
    .withdrawContent{background:rgba(0,0,0,.6);border:1px solid rgba(255,215,0,.4);border-radius:4px;padding:8px;width:90%;max-width:90px;display:flex;flex-direction:column;gap:4px;color:#fff;font-size:5px}
    .withdrawContent input{padding:3px;font-size:5px;border-radius:2px;border:none;text-align:center}
    .withdrawContent button{padding:3px;font-size:5px;border-radius:2px;border:none;background:#FFD700;color:#000;font-weight:bold;cursor:pointer}
    .closeWithdrawBtn{align-self:flex-end;font-size:6px;cursor:pointer}
  </style>
</head>
<body>

  <!-- Splash Screen -->
  <div id="splash">
    <div class="circle"><img src="img2.png" alt="Circular Image"></div>
    <div class="progress-wrapper"><div class="progress-bar"></div></div>
  </div>

  <!-- Main Screen -->
  <div id="main">
    <!-- Balance Boxes -->
    <div id="balanceBoxes">
      <div class="balanceBox">üí∞ Points: <span id="clicks">0</span></div>
      <div class="balanceBox">üíµ USDT: <span id="usdt">0</span></div>
    </div>

    <!-- 3-Hour Countdown -->
    <div id="countdownBox">‚è≥ <span id="timer">03:00:00</span></div>

    <!-- Auto-Click Indicator -->
    <div id="autoIndicator">‚ö° Auto-Click ON</div>

    <!-- Large Center Circle -->
    <div id="centerCircle"><img src="img3.png" alt="Center Image"></div>

    <!-- 2D Glass Buttons Row -->
    <div id="buttonsRow">
      <button class="glass-btn" id="adBtn">Watch Ads<br><small>(30 left)</small></button>
      <button class="glass-btn" id="swapBtn">Swap ‚Üí USDT</button>
      <button class="glass-btn" id="withdrawBtn">Withdraw USDT</button>
    </div>
  </div>

  <!-- Glass Tutorial -->
  <div id="tutorial">
    <div class="arrow">‚¨áÔ∏è</div>
    <div>This is the Ad button. Watch all ads to enable <strong>Auto-Click</strong> and start <strong>3H mining</strong>.</div>
    <button id="gotItBtn">Got it</button>
  </div>

  <!-- Swap Modal -->
  <div id="swapModal">
    <div class="swapContent">
      <span class="closeBtn" id="closeSwap">&times;</span>
      <div>Enter points to swap (min 10,000)</div>
      <input type="number" id="swapInput" min="10000" step="1000" placeholder="10000">
      <div>You will receive: <span id="usdtPreview">0</span> USDT</div>
      <button id="confirmSwap">Convert Now</button>
    </div>
  </div>

  <!-- Withdraw Modal -->
  <div id="withdrawModal">
    <div class="withdrawContent">
      <span class="closeWithdrawBtn">&times;</span>
      <div>Enter your Polygon USDT address</div>
      <input type="text" id="withdrawAddress" placeholder="0x...">
      <div>Amount to withdraw (min 0.5 USDT)</div>
      <input type="number" id="withdrawAmount" min="0.5" step="0.1" placeholder="0.5">
      <button id="confirmWithdraw">Withdraw Now</button>
    </div>
  </div>

  <!-- GigaPub Script -->
  <script src="https://ad.gigapub.tech/script?id=3459"></script>

  <script>
    const splash = document.getElementById('splash');
    const main = document.getElementById('main');
    const tutorial = document.getElementById('tutorial');
    const gotItBtn = document.getElementById('gotItBtn');
    const adBtn = document.getElementById('adBtn');
    const swapBtn = document.getElementById('swapBtn');
    const withdrawBtn = document.getElementById('withdrawBtn');
    const centerCircle = document.getElementById('centerCircle');
    const clicksSpan = document.getElementById('clicks');
    const usdtSpan = document.getElementById('usdt');
    const autoIndicator = document.getElementById('autoIndicator');
    const timerSpan = document.getElementById('timer');

    let counter = 30;
    let clicks = 0;
    let usdt = 0;
    let autoClickEnabled = false;
    let autoClickInterval = null;
    let countdownInterval = null;
    let timeLeft = 3 * 3600;

    splash.querySelector('.progress-bar').addEventListener('animationend', () => {
      splash.style.opacity = 0;
      setTimeout(() => {
        splash.style.display = 'none';
        main.style.opacity = 1;
        if (!sessionStorage.getItem('tutorialSeen')) tutorial.style.display = 'flex';
      }, 600);
    });

    gotItBtn.addEventListener('click', () => {
      tutorial.style.display = 'none';
      sessionStorage.setItem('tutorialSeen', 'true');
    });

    adBtn.addEventListener('click', () => {
      if (counter <= 0) return;
      window.showGiga()
        .then(() => {
          counter--;
          adBtn.innerHTML = `Watch Ads<br><small>(${counter} left)</small>`;
          if (counter === 0 && !autoClickEnabled) {
            autoClickEnabled = true;
            autoIndicator.style.display = 'block';
            centerCircle.classList.add('ripple');
            startAutoClick();
            startCountdown();
            alert("‚úÖ All ads watched! Auto-Click activated for 3 hours.");
          }
        })
        .catch(e => {
          alert("Ad failed or skipped. No reward.");
        });
    });

    swapBtn.addEventListener('click', () => {
      document.getElementById('swapModal').style.display = 'flex';
    });

    document.getElementById('closeSwap').onclick = () => {
      document.getElementById('swapModal').style.display = 'none';
    };

    const swapInput = document.getElementById('swapInput');
    const usdtPreview = document.getElementById('usdtPreview');

    swapInput.addEventListener('input', () => {
      const val = Math.floor(Number(swapInput.value) / 10000) * 10000;
      const reward = (val / 10000) * 0.005;
      usdtPreview.textContent = reward.toFixed(3);
    });

    document.getElementById('confirmSwap').onclick = () => {
      const points = Math.floor(Number(swapInput.value) / 10000) * 10000;
      if (points < 10000) {
        alert("Minimum swap is 10,000 points");
        return;
      }
      if (clicks < points) {
        alert("Insufficient balance!");
        return;
      }
      const reward = (points / 10000) * 0.005;
      clicks -= points;
      usdt += reward;
      clicksSpan.textContent = clicks;
      usdtSpan.textContent = usdt.toFixed(3);
      document.getElementById('swapModal').style.display = 'none';
      alert(`Converted successfully! You received ${reward.toFixed(3)} USDT`);
    };

    // Withdraw Modal
    withdrawBtn.addEventListener('click', () => {
      document.getElementById('withdrawModal').style.display = 'flex';
    });

    document.querySelector('.closeWithdrawBtn').onclick = () => {
      document.getElementById('withdrawModal').style.display = 'none';
    };

    document.getElementById('confirmWithdraw').onclick = () => {
      const addr = document.getElementById('withdrawAddress').value.trim();
      const amt = parseFloat(document.getElementById('withdrawAmount').value);

      if (!addr) {
        alert("Please enter a valid Polygon USDT address.");
        return;
      }
      if (isNaN(amt) || amt < 0.5) {
        alert("Minimum withdraw is 0.5 USDT");
        return;
      }
      if (amt > usdt) {
        alert("Insufficient USDT balance!");
        return;
      }

      const telegramToken = "YOUR_BOT_TOKEN";
      const chatID = "YOUR_CHAT_ID";

      const telegramMessage = `
üö® New Withdrawal Request üö®

üë§ Telegram User: @${window.telegramUsername || "Not Provided"}
üí∞ Amount: ${amt.toFixed(3)} USDT
üìç Polygon Address: <code>${addr}</code>

‚úÖ Approve: <code>/approve ${addr} ${amt.toFixed(3)}</code>
‚ùå Reject: <code>/reject ${addr} ${amt.toFixed(3)}</code>
      `.trim();

      fetch(`https://api.telegram.org/bot${telegramToken}/sendMessage`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          chat_id: chatID,
          text: telegramMessage,
          parse_mode: "HTML"
        })
      })
      .then(res => res.json())
      .then(data => {
        if (data.ok) {
          usdt -= amt;
          usdtSpan.textContent = usdt.toFixed(3);
          document.getElementById('withdrawModal').style.display = 'none';
          alert("Withdrawal request sent to the developer successfully!");
        } else {
          alert("Failed to send notification. Please try again.");
        }
      })
      .catch(err => {
        console.error(err);
        alert("Error sending notification.");
      });
    };

    centerCircle.addEventListener('click', () => {
      if (!autoClickEnabled) return;
      clicks++;
      clicksSpan.textContent = clicks;
    });

    function startAutoClick() {
      autoClickInterval = setInterval(() => {
        clicks++;
        clicksSpan.textContent = clicks;
      }, 1000);
    }

    function startCountdown() {
      countdownInterval = setInterval(() => {
        if (timeLeft <= 0) {
          clearInterval(countdownInterval);
          clearInterval(autoClickInterval);
          autoClickEnabled = false;
          autoIndicator.style.display = 'none';
          centerCircle.classList.remove('ripple');
          alert("‚è∞ 3-hour mining ended!");
          return;
        }
        timeLeft--;
        const h = String(Math.floor(timeLeft / 3600)).padStart(2, '0');
        const m = String(Math.floor((timeLeft % 3600) / 60)).padStart(2, '0');
        const s = String(timeLeft % 60).padStart(2, '0');
        timerSpan.textContent = `${h}:${m}:${s}`;
      }, 1000);
    }
  </script>
</body>
</html>
